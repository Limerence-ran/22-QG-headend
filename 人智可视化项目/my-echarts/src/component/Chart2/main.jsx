import style from "./main.module.css";
import React, { useState, useEffect } from "react";
import Pointxy from "../../components/point-xy/main";
import Bar from "../../components/bar/main";
import EBar from "../../components/Ebar/main";
import PointNoise from "../../components/point-noise/main";
import EPie from "../../components/EPie/main";
import { useNavigate } from "react-router-dom";
import { Skeleton, message } from "antd";
import Vedio from "../../component/Vedio/main";
function Chart2() {
    const [datas, setDatas] = useState({});
    const [isLoading, setIsLoading] = useState(true);
    const [isshow, setisShow] = useState(false);
    const navigate = useNavigate();

    useEffect(() => {
        if (localStorage.getItem("data-xy")) {
            setDatas(
                localStorage.getItem("data-xy")
                // {
                //     before_data: [
                //         [726717.7707785362, -6.966904958625196],
                //         [-362664.71312875097, 5473.638983820947],
                //         [-364053.0576497856, -5466.672078862298],
                //     ],
                //     distance: [
                //         484083.74768162443, 241605.7365663629, 242532.8448304128,
                //     ],
                //     every_dot_var: [
                //         [
                //             1.6519205024290112e11, 3.2954720537014065e10,
                //             3.314161025346034e10,
                //         ],
                //     ],
                //     noise_x: [
                //         0.037258134801549554, -0.5687285756413775,
                //         -1.2605118721699764, 0.5740609246586835,
                //         0.40000594159466885, 0.7084531973297574,
                //         -0.4656387596592924, 0.49732350837387157,
                //         0.3457084348630613, -0.09320131447712447,
                //         0.43332516367906254, -0.6231762313040786,
                //         -0.19454721098330427, 0.6249503266426092,
                //         -0.10080808225414808, -0.9919605001476408,
                //         0.20547197229291136, -0.08701630638813843,
                //         1.5737733403371927, 0.17886679346619944,
                //         -2.5878947857580745, 0.3890505602026793,
                //         -0.39770630933260404, -0.09309312976408549,
                //         -0.5972268560389052, 1.9080509807564305,
                //         -0.2564459778845572, -0.12526482622966983,
                //         -0.4099983735864134, 0.7712344220419419, 1.0018603923648672,
                //         -0.7802205167222753, -0.48934438988431117,
                //         0.026548272239104984, -0.18581482131677804,
                //         -0.12482691460079538, -0.4682661199873205,
                //         -0.5700550298726502, 0.25044341323935393,
                //         0.12809606992305989, -0.22861005241903323,
                //         0.36717100474680664, 0.1674515318229756,
                //         -1.0809657298705408, -0.5982834643068564,
                //         1.8406998358252722, -0.05748212825011302,
                //         1.7447241902852286, 0.062410163538031256,
                //         -0.2406667073428975, -0.017972005536193433,
                //         0.6612951061866693, 0.2717983619959603, 0.7159222200731016,
                //         0.41844681118550725, 0.46226943826521444,
                //         0.5584964884307092, 0.45618917028951145,
                //         0.36518636902143564, -0.19086722713264434,
                //         0.23726379121540078, -0.6293877332086101,
                //         -0.5303734490201338, 1.1472287815792135,
                //         -0.09259265208442914, 0.6858550260271352, 0.586838488722595,
                //         -0.24605001917832747, 0.23409189467847288,
                //         -0.03479360858718479, -0.5560744755965222,
                //         0.12425015829798104, -0.10623675880720083,
                //         -0.0856541418053273, 2.218064970116066, -0.9279141925466731,
                //         0.0616234333822584, 0.19217622346263044,
                //         -0.2590949290738249, -0.47941183015041344,
                //         -0.6976306123421033, 0.1294373849252635,
                //         0.03128533934446129, -0.04815581172836947,
                //         0.018713085750855327, 0.893479579391861,
                //         -0.041393143936891294, 0.052038090535249375,
                //         0.054343599004399175, -0.2267922272291833,
                //         0.36357699378119707, -0.04552007609142476,
                //         0.9320380049445877, -0.3443059680430993,
                //         -0.03415441896120488, 1.019763906244848,
                //         -0.8931326273427033, -0.06511430904645363,
                //         -0.3430090500248621, -0.17631531452947777,
                //     ],
                //     noise_y: [
                //         0.5403643870200765, 0.0024270191762927624,
                //         0.41412742642306044, 0.4146803790602321,
                //         0.27581379632971276, 0.6832982466622788,
                //         0.21568655350509092, -0.6835379568495346,
                //         -0.23139253198665452, 1.0141368678269074,
                //         0.0011706483943907731, -0.4991085631192864,
                //         -0.09055006120345926, 0.562380604143789,
                //         -0.6596633088211399, 0.8268826474142855, -0.800883439982825,
                //         -0.11867677009944391, 0.5836590881926658, 0.821603647700059,
                //         0.8406283683376601, 0.5651325043793979,
                //         -0.23286123024320893, -0.1400161023912081,
                //         -0.10265440488098619, -0.5507352235741378,
                //         0.0244116656919494, -0.3213926518798715,
                //         0.20732013687647047, -0.4455068234570515,
                //         -0.20448428803961444, 0.23726569980594903,
                //         0.08104875031566805, 0.5977403954905461,
                //         0.42031050232844075, 0.2989512100515521,
                //         0.05315524382057572, -0.6322212760480673,
                //         -0.8534624912748805, 0.02422143395810204,
                //         -0.1744198893316728, 2.1679211192764387, 0.3231193929521457,
                //         -0.40996761794842884, 0.16049001366184265,
                //         -0.16390246986992854, -0.18509959967290965,
                //         -0.016592484428684783, 0.13711234020134086,
                //         1.887674963602765, 0.4936869444426163, -0.5053958504983969,
                //         -0.17238059410928314, 0.21673794770957594,
                //         0.11693771041418956, 0.5560837956688238,
                //         -0.007293176699699032, 0.7343526026396408,
                //         -0.015288868696263596, 0.4893229459419807,
                //         -0.6008916568698409, 0.19025164418619123,
                //         -0.4162088149866908, 1.514310518518679, -1.426417746103673,
                //         0.11921323945539807, 0.038575306453034336,
                //         1.0125421049284287, 0.16400435950673614,
                //         0.020033258237735493, 1.0265233460088556, 0.590551338357435,
                //         -0.3103915939861365, -0.921176182805066,
                //         -0.23691607438953602, 1.2221128372265704,
                //         -0.421788362173384, 0.1322320289520871, -0.2692673312249365,
                //         -0.2263421506869679, 0.31274497325171235,
                //         0.22542825573325032, -0.39575883048450156,
                //         -0.3536504675982358, -1.6579655981943353,
                //         0.1274002114027834, 0.5650956945826245,
                //         -0.04183828494550887, 0.725864486786963, 0.1720723001645693,
                //         0.6206541088350913, 0.07746684680104907,
                //         -0.2727667884456891, 0.18463763396487456,
                //         -1.669523505621677e-4, -0.4306497756654034,
                //         -0.13677088679697855, 0.8940087379279801,
                //         -0.9076617370473952, -2.737556581230119,
                //     ],
                //     normalizeDistance: [[5.0, 5.0, 5.0]],
                //     respective_id: [0, 5, 8],
                //     result_data: [
                //         [242634.0231192687, -2.314459024565983],
                //         [-121086.480953356, 1828.1375387908117],
                //         [-121547.54216591279, -1825.82307976624],
                //     ],
                //     score: [
                //         9.897451400756836, 9.897294044494629, 9.903038024902344,
                //     ],
                //     var: 0.45001312649539504,
                // }
            );
        } else {
            //处理返回Chart5的路由操作
            setisShow(!isshow);
            message.error("The available data is not stored locally");
            setTimeout(() => {
                navigate("/Chartdata/Chart5");
            }, 3000);
        }
        setIsLoading(false);
    }, []);
    function handlesubmit() {
        setisShow(!isshow);
        setTimeout(() => {
            navigate("/Chartdata/Group");
        }, 3000);
    }
    return (
        <>
            <div className={style.content}>
                <div className={style.header}>
                    <span>Data Visualization</span>
                </div>
                <div className={style.data}>
                    <div className={style.chart2}>
                        <div className={style.img}>
                            {!isLoading ? (
                                <Pointxy data_xy={datas}></Pointxy>
                            ) : (
                                <Skeleton />
                            )}
                        </div>
                        <div className={style.img}>
                            {!isLoading ? (
                                <Bar data_xy={datas}></Bar>
                            ) : (
                                <Skeleton />
                            )}
                        </div>
                        <div className={style.img}>
                            {!isLoading ? (
                                <EPie data_xy={datas}></EPie>
                            ) : (
                                <Skeleton />
                            )}
                        </div>
                        <div className={style.img}>
                            {!isLoading ? (
                                <PointNoise data_xy={datas}></PointNoise>
                            ) : (
                                <Skeleton />
                            )}
                        </div>
                        <div className={style.img}>
                            {!isLoading ? (
                                <EBar data_xy={datas}></EBar>
                            ) : (
                                <Skeleton />
                            )}
                        </div>
                    </div>
                </div>
                <button onClick={handlesubmit}>finish</button>
                {isshow && <Vedio />}
            </div>
        </>
    );
}
export default Chart2;
